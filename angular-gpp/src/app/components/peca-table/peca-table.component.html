<div class="page-title">
  <h1>{{ pageTitle }}</h1>
</div>

<div class="button-container">
  <button style="border-radius: 10px; margin-bottom: 15px; margin-left: 10px" pButton pRipple icon="pi pi-plus" class="p-button-rounded p-button-success" (click)="adicionarPeca()"></button>
</div>

<div class="card">
  <p-table
    #dt2
    [value]="pecas" 
    [sortField]="'idPeca'"
    [sortOrder]="-1"
    [tableStyle]="{ 'min-width': '50rem' }" 
    [rows]="5" 
    [paginator]="true"
    [globalFilterFields]="['name', 'country.name', 'representative.name', 'status']"
    [tableStyle]="{ 'min-width': '75rem' }" 
    [rowHover]="true" 
    dataKey="id"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" 
    [showCurrentPageReport]="true">

    <ng-template pTemplate="caption">
      <div class="flex">
        <span class="p-input-icon-left ml-auto">
          <i class="pi pi-search"></i>
          <!-- <input pInputText type="text" (keyup)="onSearch($event)" placeholder="Search keyword" /> -->
        </span>
      </div>
    </ng-template>
        
    <ng-template pTemplate="header">
      <tr>
        <th>ID Peça</th>
        <th>Descrição</th>
        <th>Produto</th>
        <th>Fornecedor</th>
        <th></th>
      </tr>

      <tr>
        <th>
          <p-columnFilter type="text" field="idPeca"></p-columnFilter>
        </th>
        <th>
          <p-columnFilter type="text" field="descricao"></p-columnFilter>
        </th>
        <th>
          <p-columnFilter type="text" field="produto"></p-columnFilter>
        </th>
        <th>
          <p-columnFilter type="text" field="fornecedor"></p-columnFilter>
        </th>
        <th></th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-peca>
      <tr>
        <td>{{ peca.idPeca }}</td>
        <td>{{ peca.descricao }}</td>
        <td>{{ peca.produto.descricao }}</td>
        <td>{{ peca.produto.fornecedor.nomeFornecedor }}</td>
        <td>
          <button style="background-color: blue;" pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"
            (click)="editePeca(peca)"></button>
          <button style="background-color: red;" pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"
            (click)="deletePeca(peca.idPeca)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>